<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Priority Task Maker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container">
        <div class="form-box">
            
            <div class="theme-switch-wrapper">
                <span style="font-size: 0.8rem; margin-right: 10px; color: var(--text-muted);">Light</span>
                <label class="theme-switch">
                    <input type="checkbox" id="theme-toggle" checked>
                    <div class="slider round"></div>
                </label>
                <span style="font-size: 0.8rem; margin-left: 10px; color: var(--text-muted);">Dark</span>
            </div>

            <div class="tabs">
                <div class="tab active" id="tab-login">Login</div>
                <div class="tab" id="tab-signup">Sign Up</div>
            </div>

            <form id="auth-form">
                
                <div class="input-group" id="name-group" style="display: none;">
                    <label>Full Name</label>
                    <input type="text" id="fullname" placeholder="e.g. Shrish Roy">
                </div>

                <div class="input-group">
                    <label>Email</label>
                    <input type="email" id="email" placeholder="name@example.com" required>
                </div>

                <div class="input-group">
                    <label>Password</label>
                    <div class="password-wrapper">
                        <input type="password" id="password" placeholder="Enter password" required>
                        <i class="fas fa-eye" id="toggle-password-btn"></i>
                    </div>
                </div>

                <div class="terms-container" id="terms-container" style="display: none; margin-bottom: 15px;">
                    <input type="checkbox" id="terms-check">
                    <label for="terms-check" style="color: var(--text-muted); font-size: 0.9rem;">
                        I agree to the <a href="#" id="terms-link" style="color:var(--primary);">Terms & Rules</a>
                    </label>
                </div>

                <button type="submit" id="submit-btn" class="main-btn">Login</button>
                
                <div class="links" id="forgot-password-container">
                    <a href="#" id="forgot-password">Forgot Password?</a>
                </div>

                <div class="divider">OR</div>

                <button type="button" id="google-btn" class="google-btn">
                    <i class="fab fa-google"></i> Continue with Google
                </button>

            </form>
        </div>
    </div>

    <div id="terms-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2>Terms of Service</h2>
            <div class="legal-text">
                <p><strong>Last Updated: January 2026</strong></p>
                <p>Welcome to Priority Task Maker. By creating an account, you agree to the following terms:</p>
                <h3>1. User Accounts</h3>
                <p>You are responsible for maintaining the security of your account.</p>
                <h3>2. Acceptable Use</h3>
                <p>You agree not to use the service for unlawful purposes.</p>
                <h3>3. Privacy</h3>
                <p>Your data is stored securely via Google Firebase.</p>
            </div>
            <button id="accept-terms-btn" class="main-btn">I Understand</button>
        </div>
    </div>

    <script type="module" src="js/auth.js"></script>
    <script>
        // --- UI LOGIC (Tabs, Theme, Password, Terms) ---

        const tabLogin = document.getElementById('tab-login');
        const tabSignup = document.getElementById('tab-signup');
        const submitBtn = document.getElementById('submit-btn');
        const termsContainer = document.getElementById('terms-container');
        const nameGroup = document.getElementById('name-group');
        const forgotPassContainer = document.getElementById('forgot-password-container');
        const themeToggle = document.getElementById('theme-toggle');
        const passwordInput = document.getElementById('password');
        const togglePassBtn = document.getElementById('toggle-password-btn');

        // 1. TAB SWITCHING
        tabLogin.addEventListener('click', () => {
            tabLogin.classList.add('active');
            tabSignup.classList.remove('active');
            submitBtn.innerText = "Login";
            
            // UI Changes for Login
            termsContainer.style.display = "none";
            nameGroup.style.display = "none";
            forgotPassContainer.style.display = "block"; // SHOW Forgot Password
            
            submitBtn.disabled = false;
        });

        tabSignup.addEventListener('click', () => {
            tabSignup.classList.add('active');
            tabLogin.classList.remove('active');
            submitBtn.innerText = "Create Account";
            
            // UI Changes for Signup
            termsContainer.style.display = "flex";
            nameGroup.style.display = "block";
            forgotPassContainer.style.display = "none"; // HIDE Forgot Password
            
            const termsCheck = document.getElementById('terms-check');
            if(termsCheck && !termsCheck.checked) submitBtn.disabled = true;
        });

        // 2. THEME SWITCH
        themeToggle.addEventListener('change', () => {
            if (themeToggle.checked) {
                document.body.classList.remove('light-mode');
            } else {
                document.body.classList.add('light-mode');
            }
        });

        // 3. PASSWORD VISIBILITY TOGGLE
        togglePassBtn.addEventListener('click', () => {
            if (passwordInput.type === "password") {
                passwordInput.type = "text";
                togglePassBtn.classList.replace('fa-eye', 'fa-eye-slash');
            } else {
                passwordInput.type = "password";
                togglePassBtn.classList.replace('fa-eye-slash', 'fa-eye');
            }
        });

        // 4. TERMS MODAL
        const modal = document.getElementById('terms-modal');
        const termsLink = document.getElementById('terms-link');
        const closeBtn = document.querySelector('.close-btn');
        const acceptBtn = document.getElementById('accept-terms-btn');
        const termsCheck = document.getElementById('terms-check');

        termsLink.addEventListener('click', (e) => {
            e.preventDefault();
            modal.style.display = "flex";
        });

        closeBtn.addEventListener('click', () => modal.style.display = "none");

        acceptBtn.addEventListener('click', () => {
            modal.style.display = "none";
            termsCheck.checked = true;
            termsCheck.dispatchEvent(new Event('change'));
        });

        termsCheck.addEventListener('change', () => {
            if (tabSignup.classList.contains('active')) {
                submitBtn.disabled = !termsCheck.checked;
            }
        });

        window.onclick = (event) => {
            if (event.target == modal) modal.style.display = "none";
        }
    </script>
</body>
</html>